<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>StratMind - 新規事業企画の自己レビュー</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='/css/style.css') }}"
    />
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header">
        <div class="app-header__left">
          <h1 class="app-title">StratMind</h1>
          <p class="app-subtitle">新規事業企画の自己レビュー・ワークスペース</p>
        </div>
        <div class="app-header__right">
          <!-- デモモードの追加 -->
          <label style="color: red; font-weight: bold;">
            <input type="checkbox" id="demo-mode-checkbox" checked> デモモード（AIを使わない）
          </label>
          <!--  -->
          <button id="update-review-btn" class="button button--primary">
            AIレビューを更新する
          </button>
        </div>
      </header>

      <main class="app-main">
        <!-- Left Pane: Editor -->
        <section class="pane pane--left" aria-label="企画エディタ">
          <header class="pane-header">
            <h2 class="pane-title">企画エディタ</h2>
            <p class="pane-description">
              タイトルと企画書本文を自由に編集しながら、右側のAIレビューと往復してください。
            </p>
          </header>
          <div class="editor">
            <div class="editor-field">
              <label for="idea-title" class="editor-label">企画タイトル</label>
              <input
                id="idea-title"
                class="editor-input"
                type="text"
                placeholder="例：中小製造業向け設備保全ダッシュボード"
              />
            </div>
            <div class="editor-field editor-field--grow">
              <label for="idea-body" class="editor-label">
                企画書本文
                <span class="editor-label__hint">
                  課題・提供価値・ターゲット・ビジネスモデルなどを自由に書き出してください。
                </span>
              </label>
              <textarea
                id="idea-body"
                class="editor-textarea"
                placeholder="ここに企画の背景、狙い、ユーザー像、ユースケース、収益モデルなどを記述します。右側の問いをもとにどんどん追記・修正していきましょう。"
              ></textarea>
            </div>
          </div>
        </section>

        <!-- Right Pane: Review Assistant -->
        <section class="pane pane--right" aria-label="レビューアシスタント">
          <header class="pane-header">
            <h2 class="pane-title">レビューアシスタント</h2>
            <p class="pane-description">
              企画内容に基づいてAIが問いや参考ケースを提示します。気づきは左側の企画書に反映してください。
            </p>
          </header>

          <!-- Global message / status -->
          <div id="global-message" class="global-message" role="status" aria-live="polite"></div>

          <!-- Tabs -->
          <div class="tabs" role="tablist" aria-label="レビュータブ">
            <button
              id="tab-questions"
              class="tab tab--active"
              role="tab"
              aria-selected="true"
              aria-controls="panel-questions"
            >
              Review Questions
            </button>
            <button
              id="tab-cases"
              class="tab"
              role="tab"
              aria-selected="false"
              aria-controls="panel-cases"
            >
              Reference Cases
            </button>
          </div>

          <!-- Tab Panels -->
          <div class="tab-panels">
            <section
              id="panel-questions"
              class="tab-panel tab-panel--active"
              role="tabpanel"
              aria-labelledby="tab-questions"
            >
              <div id="questions-list" class="cards-list cards-list--questions">
                <p class="placeholder-text">
                  まだレビューは実行されていません。上部の「AIレビューを更新する」ボタンを押すと、企画内容に基づいた問いがここに表示されます。
                </p>
              </div>
            </section>

            <section
              id="panel-cases"
              class="tab-panel"
              role="tabpanel"
              aria-labelledby="tab-cases"
              hidden
            >
              <div id="cases-list" class="cards-list cards-list--cases">
                <p class="placeholder-text">
                  まだ参考ケースは読み込まれていません。AIレビューを実行すると、類似する過去の意思決定ケースがここに表示されます。
                </p>
              </div>
            </section>
          </div>
        </section>
      </main>
    </div>

    <script src="{{ url_for('static', path='/js/app.js') }}" defer></script>
  </body>
</html>
